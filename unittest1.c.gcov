        -:    0:Source:unittest1.c
        -:    0:Graph:unittest1.gcno
        -:    0:Data:unittest1.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "assert.h"
        -:    2:#include "dominion.h"
        -:    3:#include <stdio.h>
        -:    4:#include "rngs.h"
        -:    5:#include <stdlib.h>
        -:    6:
        -:    7:
        -:    8:// test to ensure isGameOver works
        -:    9:
        1:   10:int main (int argc, char** argv) {
        -:   11:  struct gameState G;
        1:   12:  struct gameState *p = &G;
        -:   13:
        -:   14:  int k[10] = {adventurer, gardens, embargo, village, minion, mine, cutpurse, 
        1:   15:	       sea_hag, tribute, smithy};
        -:   16:
        1:   17:  printf ("Starting game.\n");
        -:   18:  
        -:   19:  
        -:   20:  // set up game
        1:   21:  initializeGame(2, k, 5, p);
        -:   22:  
        1:   23:  int money = 0;
        1:   24:  int i=0;
        1:   25:  int check = 0;
        -:   26:
        -:   27:
        -:   28:do{
       35:   29:    money = 0;
        -:   30:	
      210:   31:    for (i = 0; i < numHandCards(p); i++) {
      175:   32:      if (handCard(i, p) == copper)
       61:   33:    money++;
      114:   34:      else if (handCard(i, p) == silver)
       43:   35:    money += 2;
       71:   36:      else if (handCard(i, p) == gold)
       15:   37:    money += 3;
        -:   38:
        -:   39:    }
        -:   40:	// player 0 buys card 
       35:   41:    if (whoseTurn(p) == 0) {
        -:   42:		
        1:   43:      if (money >= 8) {
    #####:   44:        printf("0: bought province\n"); 
    #####:   45:        buyCard(province, p);
        -:   46:      }
        1:   47:      else if (money >= 6) {
    #####:   48:        printf("0: bought gold\n"); 
    #####:   49:        buyCard(gold, p);
        -:   50:      }
        -:   51:	  
        1:   52:	  else if (money >= 5) {
    #####:   53:        printf("0: bought duchy\n"); 
    #####:   54:        buyCard(duchy, p);
        -:   55:      }
        1:   56:      else if (money >= 3) {
        1:   57:        printf("0: bought silver\n"); 
        1:   58:        buyCard(silver, p);
        -:   59:      }
        -:   60:
        1:   61:      printf("0: end turn\n");
        1:   62:      endTurn(p);
        -:   63:    }
        -:   64:	// player 1 buys card 
        -:   65:    else {
        -:   66:
       34:   67:      if (money >= 8) {
        8:   68:        printf("0: bought province\n"); 
        8:   69:        buyCard(province, p);
        -:   70:      }
       26:   71:      else if (money >= 6) {
        8:   72:        printf("0: bought gold\n"); 
        8:   73:        buyCard(gold, p);
        -:   74:      }
        -:   75:	  
       18:   76:	  else if (money >= 5) {
        5:   77:        printf("0: bought duchy\n"); 
        5:   78:        buyCard(duchy, p);
        -:   79:      }
       13:   80:      else if (money >= 3) {
       12:   81:        printf("0: bought silver\n"); 
       12:   82:        buyCard(silver, p);
        -:   83:      }
        -:   84:
       34:   85:      printf("0: end turn\n");
       34:   86:      endTurn(p);
        -:   87:      
       34:   88:      endTurn(p);      
        -:   89:    }
        -:   90:
       35:   91:      printf ("Player 0: %d\nPlayer 1: %d\n", scoreFor(0, p), scoreFor(1, p));
        -:   92:	
       35:   93:	check = isGameOver(p);
       35:   94:	assert (check == 0 || check == 1);
       35:   95:  }  while (!check);
        -:   96:
        1:   97:  printf ("Finished game.\n");
        1:   98:  printf ("Player 0: %d\nPlayer 1: %d\n", scoreFor(0, p), scoreFor(1, p));
        1:   99:  printf ("Unit test 1 for isGameOver, result check: %d\n", check);
        1:  100:  if (check == 1){
        1:  101:	  printf ("game over complete\n");
        -:  102:  }
        -:  103:
        1:  104:  return 0;
        -:  105:}